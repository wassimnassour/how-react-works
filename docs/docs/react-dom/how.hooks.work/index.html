<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-react-dom/how.hooks.work" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">How hooks work | How React Works</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://incepter.github.io/how-react-works/img/how-react-works.png"><meta data-rh="true" name="twitter:image" content="https://incepter.github.io/how-react-works/img/how-react-works.png"><meta data-rh="true" property="og:url" content="https://incepter.github.io/how-react-works/docs/react-dom/how.hooks.work"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="How hooks work | How React Works"><meta data-rh="true" name="description" content="Introduction"><meta data-rh="true" property="og:description" content="Introduction"><link data-rh="true" rel="icon" href="/how-react-works/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://incepter.github.io/how-react-works/docs/react-dom/how.hooks.work"><link data-rh="true" rel="alternate" href="https://incepter.github.io/how-react-works/docs/react-dom/how.hooks.work" hreflang="en"><link data-rh="true" rel="alternate" href="https://incepter.github.io/how-react-works/docs/react-dom/how.hooks.work" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9TZJWQ2XDV"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-9TZJWQ2XDV",{anonymize_ip:!0})</script><link rel="stylesheet" href="/how-react-works/assets/css/styles.72c01309.css">
<link rel="preload" href="/how-react-works/assets/js/runtime~main.275477b6.js" as="script">
<link rel="preload" href="/how-react-works/assets/js/main.3506642b.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_gr6g" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/how-react-works/"><div class="navbar__logo"><img src="/how-react-works/img/logo.svg" alt="React logo" class="themedImage_DrxO themedImage--light_L308"><img src="/how-react-works/img/logo.svg" alt="React logo" class="themedImage_DrxO themedImage--dark_K9Zq"></div><b class="navbar__title text--truncate">How react works</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/how-react-works/docs/intro">Start reading</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/incepter/how-react-works" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nO4P"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_oZpl colorModeToggle_cCHg"><button class="clean-btn toggleButton_ESyt toggleButtonDisabled_tscF" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_yqSl"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wvTO"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_n7N_"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_ttms docsWrapper_aen4"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_r6aP" type="button"></button><div class="docPage_Smv7"><aside class="theme-doc-sidebar-container docSidebarContainer_UXfD"><div class="sidebarViewport_Ddsj"><div class="sidebar_OTqS"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_C2u8"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/how-react-works/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/how-react-works/docs/react-dom/how.createroot.works">React DOM</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/how-react-works/docs/react-dom/how.createroot.works">How createRoot works</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/how-react-works/docs/react-dom/how.root_render.works">How root.render() works</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/how-react-works/docs/react-dom/how.react_modules.work">How React modules work ⏸️</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/how-react-works/docs/react-dom/how.root_render_schedule.works">How root render schedule works</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/how-react-works/docs/react-dom/how.work_loop.works">How the work loop works</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/how-react-works/docs/react-dom/how.begin_work.works">How beginWork works</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/how-react-works/docs/react-dom/how.rendering_components.works">How Rendering components works</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/how-react-works/docs/react-dom/how.reconciliation.works">How Reconciliation works</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/how-react-works/docs/react-dom/how.fiber_creation.works">How Fibers creation works ⏸️</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/how-react-works/docs/react-dom/how.hooks.work">How hooks work</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/how-react-works/docs/react-dom/how.complete_work.works">How completeWork works</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/how-react-works/docs/react-dom/how.commit.works">How Commit works</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_e21Z"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_Jr3k"><div class="docItemContainer_cPD9"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_k2g3" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/how-react-works/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_AOVS"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">React DOM</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">How hooks work</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_EQNr theme-doc-toc-mobile tocMobile_PcFa"><button type="button" class="clean-btn tocCollapsibleButton_Q6Ns">On this page</button></div><div class="theme-doc-markdown markdown"><h1>How hooks work</h1><h2 class="anchor anchorWithStickyNavbar_Cozn" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2><p><a href="https://react.dev/reference/react/hooks" target="_blank" rel="noopener noreferrer">Hooks</a> were introduced in React
v16.8.0, and since then they changed the way React apps were written.
Before them, we used to create class component for anything involving state
or lifecycle logic.
Hooks made function component the new defacto of writing react apps.</p><p>They were a huge addition that simplified a lot of things. I am not stating here
that they are better than class components, but they offer a simpler way
to reason about components and to deal with them, and especially they allow
escaping dealing with <code>this</code>.</p><p>This is not an explanation of React hooks themselves as they are pretty well
documented in the official documentation. We will see how they are written
into React.</p><h2 class="anchor anchorWithStickyNavbar_Cozn" id="context">Context<a href="#context" class="hash-link" aria-label="Direct link to Context" title="Direct link to Context">​</a></h2><p>In the previous sections, precisely in how function components get rendered;
we&#x27;ve seen that we set a <code>Dispatcher</code> based on whether your component is
mounting for the first time or updating. So first, let&#x27;s demystify this
dispatcher.</p><h2 class="anchor anchorWithStickyNavbar_Cozn" id="reactcurrentdispatcher"><code>ReactCurrentDispatcher</code><a href="#reactcurrentdispatcher" class="hash-link" aria-label="Direct link to reactcurrentdispatcher" title="Direct link to reactcurrentdispatcher">​</a></h2><p>in the <a href="https://github.com/facebook/react/blob/77c4ac2ce88736bbdfe0b29008b5df931c2beb1e/packages/react-reconciler/src/ReactFiberHooks.js#L556" target="_blank" rel="noopener noreferrer"><code>renderWithHooks</code></a>
function, we set the <code>ReactCurrentDispatcher.current</code>. Which is a plain
javascript object with all the hooks implementations that React has.</p><p>The goal of having the dispatcher object is to limit the behavior of your hooks&#x27;
usage:</p><ul><li>You use hooks outside the render phase: This means that hooks
won&#x27;t work if you just decide to call the function component manually when
React isn&#x27;t rendering. You are probably familiar with the thrown error.</li><li>Hooks behavior on mount and update isn&#x27;t the same: as we will see later in
this section, on mount, the main goal of the dispatcher is to <code>reserve</code> as
place for your hook call and initialize it, but on update it will perform
the update logic which is different.</li></ul><p>Like we said, the dispatcher contains as many properties as React hooks:</p><div class="language-tsx codeBlockContainer_AmIx theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yFFW"><pre tabindex="0" class="prism-code language-tsx codeBlock_x69U thin-scrollbar"><code class="codeBlockLines_X9ZV"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">AllDispatchers</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Dispatcher</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  readContext</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  use</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  useCallback</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> hook</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  useContext</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> hook</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  useEffect</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> hook</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  useImperativeHandle</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> hook</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  useInsertionEffect</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> hook</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  useLayoutEffect</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> hook</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  useMemo</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> hook</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  useReducer</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> hook</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  useRef</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> hook</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  useState</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> hook</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  useDebugValue</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> hook</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  useDeferredValue</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> hook</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  useTransition</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> hook</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  useSyncExternalStore</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> hook</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  useId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> hook</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_sFX4"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_EaiJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_TrRI"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_mQN1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>There are several dispatchers, but we will only discuss the main four:</p><ul><li><code>ContextOnlyDispatcher</code>: <a href="https://github.com/facebook/react/blob/77c4ac2ce88736bbdfe0b29008b5df931c2beb1e/packages/react-reconciler/src/ReactFiberHooks.js#L3408" target="_blank" rel="noopener noreferrer">This dispatcher</a>
will prevent you from using hooks outside the render phase. It will throw the
famous <code>Invalid hook call</code> <a href="https://github.com/facebook/react/blob/77c4ac2ce88736bbdfe0b29008b5df931c2beb1e/packages/react-reconciler/src/ReactFiberHooks.js#L440" target="_blank" rel="noopener noreferrer">error.</a></li><li><code>HooksDispatcherOnMount</code>: <a href="https://github.com/facebook/react/blob/77c4ac2ce88736bbdfe0b29008b5df931c2beb1e/packages/react-reconciler/src/ReactFiberHooks.js#L3446" target="_blank" rel="noopener noreferrer">This dispatcher</a>
contains hooks implementation for components when mounting for the first time.</li><li><code>HooksDispatcherOnUpdate</code>: <a href="https://github.com/facebook/react/blob/77c4ac2ce88736bbdfe0b29008b5df931c2beb1e/packages/react-reconciler/src/ReactFiberHooks.js#L3484" target="_blank" rel="noopener noreferrer">This dispatcher</a>
contains hooks implementation for components when they are updating.</li><li><code>HooksDispatcherOnRerender</code>: <a href="https://github.com/facebook/react/blob/77c4ac2ce88736bbdfe0b29008b5df931c2beb1e/packages/react-reconciler/src/ReactFiberHooks.js#L3522" target="_blank" rel="noopener noreferrer">This dispatcher</a>
contains hooks implementation when components are re-rendering: when they
perform a render phase update or when they rendered twice in dev mode.</li></ul><h2 class="anchor anchorWithStickyNavbar_Cozn" id="how-hooks-are-modelled">How hooks are modelled<a href="#how-hooks-are-modelled" class="hash-link" aria-label="Direct link to How hooks are modelled" title="Direct link to How hooks are modelled">​</a></h2><p>Each function component may have calls for any of the supported hooks. Remember,
all hooks calls occur withing the <code>renderWithHooks</code> function (exception for
the hooks for re-renders, they are called from within the <code>renderWithHooksAgain</code>
function).</p><p>Hooks are store into the <code>memoizedState</code> property of the <a href="https://github.com/facebook/react/blob/77c4ac2ce88736bbdfe0b29008b5df931c2beb1e/packages/react-reconciler/src/ReactFiberHooks.js#L965" target="_blank" rel="noopener noreferrer">related <code>Fiber</code>.</a></p><p>A hook is stored inside React as a plain object with the following properties:</p><div class="language-tsx codeBlockContainer_AmIx theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yFFW"><pre tabindex="0" class="prism-code language-tsx codeBlock_x69U thin-scrollbar"><code class="codeBlockLines_X9ZV"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> hook</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Hook</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  memoizedState</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  baseState</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  baseQueue</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  queue</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  next</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_sFX4"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_EaiJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_TrRI"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_mQN1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where:</p><ul><li><code>memoizedState</code>: contains the hook &quot;state&quot; (or value)</li><li><code>baseState</code>: used by state hooks to store the initial value</li><li><code>baseQueue</code>:</li><li><code>queue</code>:</li><li><code>next</code>: the next hook.</li></ul><p>As you may have guessed, the <code>next</code> property references in the next hook your
component uses. Thus, hooks are modelled as a linked list of the previous
data structure.</p><p>Each hook have its own specification when it comes to what it stores inside
these properties, some hooks don&#x27;t use all of these properties, obviously.</p><p>Notice how this data structure doesn&#x27;t contain any information about the hook
being used, hooks relies on call order and should ALWAYS be preserved.</p><p><img loading="lazy" alt="fiber and hook" src="/how-react-works/assets/images/10.fiber_and_hook-e0e8b8ce545dbc127cc01d093c7dd427.png" width="671" height="444" class="img_qCxU"></p><p>Dan Abramov wrote an <a href="https://overreacted.io/why-do-hooks-rely-on-call-order/" target="_blank" rel="noopener noreferrer">outstanding blog post</a>
explaining this design choice.</p><h3 class="anchor anchorWithStickyNavbar_Cozn" id="hooks-examples">Hooks examples<a href="#hooks-examples" class="hash-link" aria-label="Direct link to Hooks examples" title="Direct link to Hooks examples">​</a></h3><p>Assuming we are rendering the following component:</p><div class="language-tsx codeBlockContainer_AmIx theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yFFW"><pre tabindex="0" class="prism-code language-tsx codeBlock_x69U thin-scrollbar"><code class="codeBlockLines_X9ZV"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">MyFunctionComponent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">props</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">count</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// please don&#x27;t do this, this is only for demo purposes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> isMounted </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">useRef</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// please don&#x27;t do this, this is only for demo purposes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> mountDate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">useMemo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token known-class-name class-name">Date</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">useEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">handler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;window is focused&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token dom variable" style="color:#36acaa">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">addEventListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;focus&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> handler</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token dom variable" style="color:#36acaa">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">removeEventListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;focus&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> handler</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Count is </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">count</span><span class="token punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_sFX4"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_EaiJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_TrRI"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_mQN1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Rendering this component will result in having a <code>Fiber</code> of tag
<code>FunctionComponent</code> with the following hooks linked list:</p><div class="language-tsx codeBlockContainer_AmIx theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yFFW"><pre tabindex="0" class="prism-code language-tsx codeBlock_x69U thin-scrollbar"><code class="codeBlockLines_X9ZV"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> memoizedState </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// useState</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;memoizedState&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;baseState&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;baseQueue&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;queue&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&quot;pending&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&quot;lanes&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&quot;lastRenderedState&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;next&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// useRef</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&quot;memoizedState&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">&quot;current&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&quot;baseState&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&quot;baseQueue&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&quot;queue&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&quot;next&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// useMemo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">&quot;memoizedState&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token number" style="color:#36acaa">1700218172414</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">&quot;baseState&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">&quot;baseQueue&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">&quot;queue&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">&quot;next&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// useEffect</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">&quot;memoizedState&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">&quot;tag&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">&quot;inst&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">&quot;deps&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">&quot;next&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;the same effect .. removed for clarity&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">&quot;baseState&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">&quot;baseQueue&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">&quot;queue&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">&quot;next&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_sFX4"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_EaiJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_TrRI"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_mQN1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_Cozn" id="how-hooks-on-mount-work">How hooks on mount work<a href="#how-hooks-on-mount-work" class="hash-link" aria-label="Direct link to How hooks on mount work" title="Direct link to How hooks on mount work">​</a></h2><p>The purpose on hooks on mount as stated before is to grab a place in the linked
list of the hooks.</p><p>So, all hooks implementations on mount will first perform the following:</p><div class="language-tsx codeBlockContainer_AmIx theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yFFW"><pre tabindex="0" class="prism-code language-tsx codeBlock_x69U thin-scrollbar"><code class="codeBlockLines_X9ZV"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> hook </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mountWorkInProgressHook</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_sFX4"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_EaiJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_TrRI"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_mQN1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>mountWorkInProgressHook</code> function will create the previous data structure
and then set is as the <code>memoizedState</code> property of the <code>currentlyRenderingFiber</code>.</p><h3 class="anchor anchorWithStickyNavbar_Cozn" id="mountworkinprogresshook-implementation"><code>mountWorkInProgressHook</code> Implementation<a href="#mountworkinprogresshook-implementation" class="hash-link" aria-label="Direct link to mountworkinprogresshook-implementation" title="Direct link to mountworkinprogresshook-implementation">​</a></h3><p>The mount in progress hook function is implemented as follows:</p><div class="language-tsx codeBlockContainer_AmIx theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yFFW"><pre tabindex="0" class="prism-code language-tsx codeBlock_x69U thin-scrollbar"><code class="codeBlockLines_X9ZV"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mountWorkInProgressHook</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Hook</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> hook</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Hook</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    memoizedState</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    baseState</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    baseQueue</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    queue</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    next</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">workInProgressHook </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// This is the first hook in the list</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    currentlyRenderingFiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">memoizedState</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> workInProgressHook </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> hook</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Append to the end of the list</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    workInProgressHook </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> workInProgressHook</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">next</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> hook</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> workInProgressHook</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_sFX4"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_EaiJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_TrRI"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_mQN1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>First, it will create the hook object</li><li>Then, if it is the first hook of the list, it will attach it to the
<code>memoizedState</code> of the <code>currentlyRenderingFiber</code> and set this hook at the
<code>workInProgressHook</code></li><li>Or else, it will attach it to the <code>next</code> property of the <code>workInProgressHook</code>.</li></ul><p>And that&#x27;s it!</p><p>Depending on the hook, other things will be performed, we will see them
separately for each supported hook.</p><h2 class="anchor anchorWithStickyNavbar_Cozn" id="how-hooks-on-update-work">How hooks on update work<a href="#how-hooks-on-update-work" class="hash-link" aria-label="Direct link to How hooks on update work" title="Direct link to How hooks on update work">​</a></h2><p>When your component is updating (not its first ever render), each supported
hook call will start with the following expression then will follow up with
the specific work.</p><div class="language-tsx codeBlockContainer_AmIx theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yFFW"><pre tabindex="0" class="prism-code language-tsx codeBlock_x69U thin-scrollbar"><code class="codeBlockLines_X9ZV"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> hook </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">updateWorkInProgressHook</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_sFX4"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_EaiJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_TrRI"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_mQN1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://github.com/facebook/react/blob/77c4ac2ce88736bbdfe0b29008b5df931c2beb1e/packages/react-reconciler/src/ReactFiberHooks.js#L973" target="_blank" rel="noopener noreferrer"><code>updateWorkInProgressHook</code></a>
is a bit more complex than the mount one, but its purpose it to detect the next
<code>workInProgressHook</code> too. it used for both updates and re-renders, so it assumes
that there is either a <code>current</code> hook object that can be cloned or a
<code>work-in-progress</code> from a previous render that can be reused.</p><p>The first part of this function then is to find the currently rendered hook
value. It will check the <code>current</code> rendered fiber&#x27;s <code>memoizedState</code>
property if the <code>currentHook</code> module variable is null, or else it takes its
<code>next</code> property:</p><div class="language-tsx codeBlockContainer_AmIx theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yFFW"><pre tabindex="0" class="prism-code language-tsx codeBlock_x69U thin-scrollbar"><code class="codeBlockLines_X9ZV"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// at module level:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> currentHook</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token maybe-class-name">Hook</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// inside updateWorkInProgressHook</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> nextCurrentHook</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token maybe-class-name">Hook</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">currentHook </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// the current rendered fiber</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> current </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> currentlyRenderingFiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">alternate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// already mounted</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">current </span><span class="token operator" style="color:#393A34">!==</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    nextCurrentHook </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> current</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">memoizedState</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// first mount</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    nextCurrentHook </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  nextCurrentHook </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> currentHook</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">next</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_sFX4"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_EaiJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_TrRI"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_mQN1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now, after detecting the current rendered (painted) hook value, React will
then try to find its alternate (the being rendered one):</p><div class="language-tsx codeBlockContainer_AmIx theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yFFW"><pre tabindex="0" class="prism-code language-tsx codeBlock_x69U thin-scrollbar"><code class="codeBlockLines_X9ZV"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// at module level:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> workInProgressHook</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token maybe-class-name">Hook</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// inside updateWorkInProgressHook</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> nextWorkInProgressHook</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token maybe-class-name">Hook</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// first hook of the list, take it from the being rendered fiber</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">workInProgressHook </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  nextWorkInProgressHook </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> currentlyRenderingFiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">memoizedState</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// or else, it is the next hook</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  nextWorkInProgressHook </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> workInProgressHook</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">next</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_sFX4"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_EaiJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_TrRI"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_mQN1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It is important to note that when we start updating a component, the memoized
state property is reset and set to null.</p><p>Now, we have the currently painted hook value, and the being rendered one.</p><p>When there is a <code>nextWorkInProgressHook</code>, this means that we already have
started rendering then we are rendering again without committing and finishing
the render, and thus, we will reuse it as is:</p><div class="language-tsx codeBlockContainer_AmIx theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yFFW"><pre tabindex="0" class="prism-code language-tsx codeBlock_x69U thin-scrollbar"><code class="codeBlockLines_X9ZV"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">nextWorkInProgressHook </span><span class="token operator" style="color:#393A34">!==</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// There&#x27;s already a work-in-progress. Reuse it.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  workInProgressHook </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> nextWorkInProgressHook</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  nextWorkInProgressHook </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> workInProgressHook</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">next</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  currentHook </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> nextCurrentHook</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_sFX4"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_EaiJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_TrRI"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_mQN1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Or else, if the <code>nextCurrentHook</code> is null, that we are rendering more hooks
than the previous render, which is against hooks rules, and then React will
throw an error.
When <code>nextCurrentHook</code> isn&#x27;t null, this means that we should clone the previous
hook and use it as a base:</p><div class="language-tsx codeBlockContainer_AmIx theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yFFW"><pre tabindex="0" class="prism-code language-tsx codeBlock_x69U thin-scrollbar"><code class="codeBlockLines_X9ZV"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// React code</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">nextWorkInProgressHook </span><span class="token operator" style="color:#393A34">!==</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// previous code</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">nextCurrentHook </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> currentFiber </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> currentlyRenderingFiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">alternate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">currentFiber </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// This is the initial render. This branch is reached when the component</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// suspends, resumes, then renders an additional hook.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// Should never be reached because we should switch to the mount dispatcher first.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">throw</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token string" style="color:#e3116c">&#x27;Update hook called on initial render. This is likely a bug in React. Please file an issue.&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// This is an update. We should always have a current hook.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">throw</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Rendered more hooks than during the previous render.&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  currentHook </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> nextCurrentHook</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// clone from the currently painted hook</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> newHook</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Hook</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    memoizedState</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> currentHook</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">memoizedState</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    baseState</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> currentHook</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">baseState</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    baseQueue</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> currentHook</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">baseQueue</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    queue</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> currentHook</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">queue</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    next</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">workInProgressHook </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// This is the first hook in the list.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    currentlyRenderingFiber</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">memoizedState</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> workInProgressHook </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> newHook</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Append to the end of the list.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    workInProgressHook </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> workInProgressHook</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">next</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> newHook</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_sFX4"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_EaiJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_TrRI"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_mQN1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_Cozn" id="how-hooks-on-rerender-work">How hooks on rerender work<a href="#how-hooks-on-rerender-work" class="hash-link" aria-label="Direct link to How hooks on rerender work" title="Direct link to How hooks on rerender work">​</a></h2><p>Re-rendering components is an internal term in the React codebase that means
that the component either scheduled a render phase update or that we are
replaying it in development mode.</p><p>If you take a close look at the <code>HooksDispatcherOnRerender</code> dispatcher, you will
notice that it is the same as the <code>HooksDispatcherOnUpdate</code> except for:
<code>useReducer: rerenderReducer</code>, <code>useState: rerenderState</code>,
<code>useDeferredValue: rerenderDeferredValue</code> and <code>useTransition: rerenderTransition</code>.</p><p>This dispatcher is set from the <a href="https://github.com/facebook/react/blob/77c4ac2ce88736bbdfe0b29008b5df931c2beb1e/packages/react-reconciler/src/ReactFiberHooks.js#L771" target="_blank" rel="noopener noreferrer"><code>renderWithHooksAgain</code></a>
function. I will just copy Andrew&#x27;s comment about this function:</p><div class="language-tsx codeBlockContainer_AmIx theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yFFW"><pre tabindex="0" class="prism-code language-tsx codeBlock_x69U thin-scrollbar"><code class="codeBlockLines_X9ZV"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// This is used to perform another render pass. It&#x27;s used when setState is</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// called during render, and for double invoking components in Strict Mode</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// during development.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// The state from the previous pass is reused whenever possible. So, state</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// updates that were already processed are not processed again, and memoized</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// functions (`useMemo`) are not invoked again.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Keep rendering in a loop for as long as render phase updates continue to</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// be scheduled. Use a counter to prevent infinite loops.</span><br></span></code></pre><div class="buttonGroup_sFX4"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_EaiJ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_TrRI"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_mQN1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_Cozn" id="how-each-hook-works">How each hook works<a href="#how-each-hook-works" class="hash-link" aria-label="Direct link to How each hook works" title="Direct link to How each hook works">​</a></h2><p>We will follow the presence of hooks in the dispatchers order to explain them.</p><h3 class="anchor anchorWithStickyNavbar_Cozn" id="how-use-works">How use works<a href="#how-use-works" class="hash-link" aria-label="Direct link to How use works" title="Direct link to How use works">​</a></h3><div style="padding:8px;text-decoration:Window"><i><p>This section is not available yet. Please<a href="https://github.com/incepter/how-react-works/issues/new" target="_blank"> fill an issue.</a></p><p>While waiting for the newsletter, you can get notified when new content drops by following<a href="https://x.com/incepterr" target="_blank"> me on X.</a></p></i></div><h3 class="anchor anchorWithStickyNavbar_Cozn" id="how-usecallback-works">How useCallback works<a href="#how-usecallback-works" class="hash-link" aria-label="Direct link to How useCallback works" title="Direct link to How useCallback works">​</a></h3><div style="padding:8px;text-decoration:Window"><i><p>This section is not available yet. Please<a href="https://github.com/incepter/how-react-works/issues/new" target="_blank"> fill an issue.</a></p><p>While waiting for the newsletter, you can get notified when new content drops by following<a href="https://x.com/incepterr" target="_blank"> me on X.</a></p></i></div><h3 class="anchor anchorWithStickyNavbar_Cozn" id="how-useeffect-works">How useEffect works<a href="#how-useeffect-works" class="hash-link" aria-label="Direct link to How useEffect works" title="Direct link to How useEffect works">​</a></h3><div style="padding:8px;text-decoration:Window"><i><p>This section is not available yet. Please<a href="https://github.com/incepter/how-react-works/issues/new" target="_blank"> fill an issue.</a></p><p>While waiting for the newsletter, you can get notified when new content drops by following<a href="https://x.com/incepterr" target="_blank"> me on X.</a></p></i></div><h3 class="anchor anchorWithStickyNavbar_Cozn" id="how-useimperativehandle-works">How useImperativeHandle works<a href="#how-useimperativehandle-works" class="hash-link" aria-label="Direct link to How useImperativeHandle works" title="Direct link to How useImperativeHandle works">​</a></h3><div style="padding:8px;text-decoration:Window"><i><p>This section is not available yet. Please<a href="https://github.com/incepter/how-react-works/issues/new" target="_blank"> fill an issue.</a></p><p>While waiting for the newsletter, you can get notified when new content drops by following<a href="https://x.com/incepterr" target="_blank"> me on X.</a></p></i></div><h3 class="anchor anchorWithStickyNavbar_Cozn" id="how-useinsertioneffect-works">How useInsertionEffect works<a href="#how-useinsertioneffect-works" class="hash-link" aria-label="Direct link to How useInsertionEffect works" title="Direct link to How useInsertionEffect works">​</a></h3><div style="padding:8px;text-decoration:Window"><i><p>This section is not available yet. Please<a href="https://github.com/incepter/how-react-works/issues/new" target="_blank"> fill an issue.</a></p><p>While waiting for the newsletter, you can get notified when new content drops by following<a href="https://x.com/incepterr" target="_blank"> me on X.</a></p></i></div><h3 class="anchor anchorWithStickyNavbar_Cozn" id="how-uselayouteffect-works">How useLayoutEffect works<a href="#how-uselayouteffect-works" class="hash-link" aria-label="Direct link to How useLayoutEffect works" title="Direct link to How useLayoutEffect works">​</a></h3><div style="padding:8px;text-decoration:Window"><i><p>This section is not available yet. Please<a href="https://github.com/incepter/how-react-works/issues/new" target="_blank"> fill an issue.</a></p><p>While waiting for the newsletter, you can get notified when new content drops by following<a href="https://x.com/incepterr" target="_blank"> me on X.</a></p></i></div><h3 class="anchor anchorWithStickyNavbar_Cozn" id="how-usememo-works">How useMemo works<a href="#how-usememo-works" class="hash-link" aria-label="Direct link to How useMemo works" title="Direct link to How useMemo works">​</a></h3><div style="padding:8px;text-decoration:Window"><i><p>This section is not available yet. Please<a href="https://github.com/incepter/how-react-works/issues/new" target="_blank"> fill an issue.</a></p><p>While waiting for the newsletter, you can get notified when new content drops by following<a href="https://x.com/incepterr" target="_blank"> me on X.</a></p></i></div><h3 class="anchor anchorWithStickyNavbar_Cozn" id="how-usereducer-works">How useReducer works<a href="#how-usereducer-works" class="hash-link" aria-label="Direct link to How useReducer works" title="Direct link to How useReducer works">​</a></h3><div style="padding:8px;text-decoration:Window"><i><p>This section is not available yet. Please<a href="https://github.com/incepter/how-react-works/issues/new" target="_blank"> fill an issue.</a></p><p>While waiting for the newsletter, you can get notified when new content drops by following<a href="https://x.com/incepterr" target="_blank"> me on X.</a></p></i></div><h3 class="anchor anchorWithStickyNavbar_Cozn" id="how-useref-works">How useRef works<a href="#how-useref-works" class="hash-link" aria-label="Direct link to How useRef works" title="Direct link to How useRef works">​</a></h3><div style="padding:8px;text-decoration:Window"><i><p>This section is not available yet. Please<a href="https://github.com/incepter/how-react-works/issues/new" target="_blank"> fill an issue.</a></p><p>While waiting for the newsletter, you can get notified when new content drops by following<a href="https://x.com/incepterr" target="_blank"> me on X.</a></p></i></div><h3 class="anchor anchorWithStickyNavbar_Cozn" id="how-usestate-works">How useState works<a href="#how-usestate-works" class="hash-link" aria-label="Direct link to How useState works" title="Direct link to How useState works">​</a></h3><div style="padding:8px;text-decoration:Window"><i><p>This section is not available yet. Please<a href="https://github.com/incepter/how-react-works/issues/new" target="_blank"> fill an issue.</a></p><p>While waiting for the newsletter, you can get notified when new content drops by following<a href="https://x.com/incepterr" target="_blank"> me on X.</a></p></i></div><h3 class="anchor anchorWithStickyNavbar_Cozn" id="how-usedebugvalue-works">How useDebugValue works<a href="#how-usedebugvalue-works" class="hash-link" aria-label="Direct link to How useDebugValue works" title="Direct link to How useDebugValue works">​</a></h3><div style="padding:8px;text-decoration:Window"><i><p>This section is not available yet. Please<a href="https://github.com/incepter/how-react-works/issues/new" target="_blank"> fill an issue.</a></p><p>While waiting for the newsletter, you can get notified when new content drops by following<a href="https://x.com/incepterr" target="_blank"> me on X.</a></p></i></div><h3 class="anchor anchorWithStickyNavbar_Cozn" id="how-usedeferredvalue-works">How useDeferredValue works<a href="#how-usedeferredvalue-works" class="hash-link" aria-label="Direct link to How useDeferredValue works" title="Direct link to How useDeferredValue works">​</a></h3><div style="padding:8px;text-decoration:Window"><i><p>This section is not available yet. Please<a href="https://github.com/incepter/how-react-works/issues/new" target="_blank"> fill an issue.</a></p><p>While waiting for the newsletter, you can get notified when new content drops by following<a href="https://x.com/incepterr" target="_blank"> me on X.</a></p></i></div><h3 class="anchor anchorWithStickyNavbar_Cozn" id="how-usetransition-works">How useTransition works<a href="#how-usetransition-works" class="hash-link" aria-label="Direct link to How useTransition works" title="Direct link to How useTransition works">​</a></h3><div style="padding:8px;text-decoration:Window"><i><p>This section is not available yet. Please<a href="https://github.com/incepter/how-react-works/issues/new" target="_blank"> fill an issue.</a></p><p>While waiting for the newsletter, you can get notified when new content drops by following<a href="https://x.com/incepterr" target="_blank"> me on X.</a></p></i></div><h3 class="anchor anchorWithStickyNavbar_Cozn" id="how-usesyncexternalstore-works">How useSyncExternalStore works<a href="#how-usesyncexternalstore-works" class="hash-link" aria-label="Direct link to How useSyncExternalStore works" title="Direct link to How useSyncExternalStore works">​</a></h3><div style="padding:8px;text-decoration:Window"><i><p>This section is not available yet. Please<a href="https://github.com/incepter/how-react-works/issues/new" target="_blank"> fill an issue.</a></p><p>While waiting for the newsletter, you can get notified when new content drops by following<a href="https://x.com/incepterr" target="_blank"> me on X.</a></p></i></div><h3 class="anchor anchorWithStickyNavbar_Cozn" id="how-useid-works">How useId works<a href="#how-useid-works" class="hash-link" aria-label="Direct link to How useId works" title="Direct link to How useId works">​</a></h3><div style="padding:8px;text-decoration:Window"><i><p>This section is not available yet. Please<a href="https://github.com/incepter/how-react-works/issues/new" target="_blank"> fill an issue.</a></p><p>While waiting for the newsletter, you can get notified when new content drops by following<a href="https://x.com/incepterr" target="_blank"> me on X.</a></p></i></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/incepter/how-react-works/edit/main/packages/howreactworks/docs/react-dom/10.how.hooks.work.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_laoB" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_ZrsU"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/how-react-works/docs/react-dom/how.fiber_creation.works"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">How Fibers creation works ⏸️</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/how-react-works/docs/react-dom/how.complete_work.works"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">How completeWork works</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_oqDP thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#context" class="table-of-contents__link toc-highlight">Context</a></li><li><a href="#reactcurrentdispatcher" class="table-of-contents__link toc-highlight"><code>ReactCurrentDispatcher</code></a></li><li><a href="#how-hooks-are-modelled" class="table-of-contents__link toc-highlight">How hooks are modelled</a><ul><li><a href="#hooks-examples" class="table-of-contents__link toc-highlight">Hooks examples</a></li></ul></li><li><a href="#how-hooks-on-mount-work" class="table-of-contents__link toc-highlight">How hooks on mount work</a><ul><li><a href="#mountworkinprogresshook-implementation" class="table-of-contents__link toc-highlight"><code>mountWorkInProgressHook</code> Implementation</a></li></ul></li><li><a href="#how-hooks-on-update-work" class="table-of-contents__link toc-highlight">How hooks on update work</a></li><li><a href="#how-hooks-on-rerender-work" class="table-of-contents__link toc-highlight">How hooks on rerender work</a></li><li><a href="#how-each-hook-works" class="table-of-contents__link toc-highlight">How each hook works</a><ul><li><a href="#how-use-works" class="table-of-contents__link toc-highlight">How use works</a></li><li><a href="#how-usecallback-works" class="table-of-contents__link toc-highlight">How useCallback works</a></li><li><a href="#how-useeffect-works" class="table-of-contents__link toc-highlight">How useEffect works</a></li><li><a href="#how-useimperativehandle-works" class="table-of-contents__link toc-highlight">How useImperativeHandle works</a></li><li><a href="#how-useinsertioneffect-works" class="table-of-contents__link toc-highlight">How useInsertionEffect works</a></li><li><a href="#how-uselayouteffect-works" class="table-of-contents__link toc-highlight">How useLayoutEffect works</a></li><li><a href="#how-usememo-works" class="table-of-contents__link toc-highlight">How useMemo works</a></li><li><a href="#how-usereducer-works" class="table-of-contents__link toc-highlight">How useReducer works</a></li><li><a href="#how-useref-works" class="table-of-contents__link toc-highlight">How useRef works</a></li><li><a href="#how-usestate-works" class="table-of-contents__link toc-highlight">How useState works</a></li><li><a href="#how-usedebugvalue-works" class="table-of-contents__link toc-highlight">How useDebugValue works</a></li><li><a href="#how-usedeferredvalue-works" class="table-of-contents__link toc-highlight">How useDeferredValue works</a></li><li><a href="#how-usetransition-works" class="table-of-contents__link toc-highlight">How useTransition works</a></li><li><a href="#how-usesyncexternalstore-works" class="table-of-contents__link toc-highlight">How useSyncExternalStore works</a></li><li><a href="#how-useid-works" class="table-of-contents__link toc-highlight">How useId works</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/how-react-works/docs/intro">Start reading</a></li></ul></div><div class="col footer__col"><div class="footer__title">Reach out</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/incepterr" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nO4P"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/incepter/how-react-works" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nO4P"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 incepter. Built with Docusaurus.</div></div></div></footer></div>
<script src="/how-react-works/assets/js/runtime~main.275477b6.js"></script>
<script src="/how-react-works/assets/js/main.3506642b.js"></script>
</body>
</html>